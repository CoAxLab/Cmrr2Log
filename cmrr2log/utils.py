#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""

"""

def create_format(dcm_path):
    
    import pydicom
    
    dcm = pydicom.read_file(dcm_path.absolute().as_posix())
    
    folder_name = dcm_path.parent.name
    base_name = dcm_path.name
    
    format_dict = {
            'p': str(dcm[0x00181030].value), 
            'd': str(dcm[0x0008103e].value),
            'i': str(dcm[0x00100020].value),
            's': str(dcm[0x00200011].value),
            't': str(dcm[0x00080020].value + "_" + dcm[0x00080030].value.split(".")[0]),
            'u': str(dcm[0x00200012].value),
            'x': str(dcm[0x00200010].value),
            'z': 'cmrr',
            'v': 'Siemens',
            'r': str(dcm[0x00200013].value),
            'n': str(dcm[0x00100010].value),
            'm': 'Si',
            'k': str(dcm[0x0020000d].value),
            'j': str(dcm[0x0020000e].value),
            'f': str(folder_name),
            'b': str(base_name),
            }
    
    return format_dict

def create_sidecar_dict(dcm_path):
    
    import pydicom
    
    tags = [("0008", "0005"), ("0008", "0008"), ("0008", "0012"), ("0008", "0013"), 
            ("0008", "0016"), ("0008", "0018"), ("0008", "0020"), ("0008", "0021"), 
            ("0008", "0030"), ("0008", "0031"), ("0008", "0050"), ("0008", "0060"), 
            ("0008", "0070"), ("0008", "0080"), ("0008", "0081"), ("0008", "0090"), 
            ("0008", "1010"), ("0008", "1030"), ("0008", "103e"), ("0008", "1050"), 
            ("0008", "1070"), ("0008", "1090"), 
            #("0008", "1140"), 
            ("0010", "0010"), 
            ("0010", "0020"), ("0010", "0030"), ("0010", "0040"), ("0010", "1010"), 
            ("0010", "1020"), ("0010", "1030"), ("0018", "0015"), ("0018", "1000"), 
            ("0018", "1020"), ("0018", "1030"), ("0018", "5100"), ("0020", "000d"), 
            ("0020", "000e"), ("0020", "0010"), ("0020", "0011"), ("0020", "0012"),
            ("0020", "0013"), ("0029", "0010"), ("0029", "0011"), ("0029", "0012"), 
            ("0029", "1008"), ("0029", "1009"), #("0029", "1108"), ("0029", "1109"), 
            #("0029", "1110"), ("0029", "1118"), ("0029", "1119"), ("0029", "1120"), 
            #("0029", "1260"), 
            ("0032", "1032"), ("0040", "0244"), ("0040", "0245"), 
            ("0040", "0253"), ("0040", "0254"),("0040", "0280")]
    
    dcm = pydicom.read_file(dcm_path.absolute().as_posix())
    
    sidecar_dict = {}
    for a, b in tags:
        
        name = str(dcm["0x" + a + b].name)
        value = str(dcm["0x" + a + b].value)
        sidecar_dict[name] = value
        
    return sidecar_dict

